---
layout: default
title: Tasks
---
<section class="annotate">
	<p><strong>Deployment automation for Wordpress</strong>. This plugin is a set of tasks used to deploy and manage Wordpress sites. This plugin is particularly useful for moving Wordpress sites to different environments with ease.</p>
	<pre class="terminal"><code data-language="shell">
$ composer require pomander/wordpress:@stable
	</code></pre>
</section>

<section class="annotate">
	<h2>Load into environment</h2>
	<p>Include this in all of your environment configurations that use Wordpress. This will load all of the necessary tasks into the environment.</p>
	<pre><code data-language="php">
$env-&gt;load("Wordpress");

// settings and tasks...
	</code></pre>
</section>

<section class="annotate">
	<h2>This is what you get</h2>
	<p></p>
	<pre class="terminal"><code data-language="shell">
deploy:plugins      # Deploy plugins in environment.
deploy:wordpress    # Deploy Wordpress in environment.
htaccess            # Create and deploy .htaccess for environments
setup               # Alias of wpify
uploads:pull        # Download uploads from environment
uploads:push        # Place all local uploads into environment
wp_config           # Create and deploy wp-config.php for environment
wpify               # Wordpress task stack for local machine (1 and done)
	</code></pre>
	<p>Existing tasks like <code>deploy</code> are automatically modified to work so you don't have to change your workflow.</p>
</section>

<section class="annotate">
	<h2>Command line usage</h2>
	<p>Use <code>pom setup</code> to completely bootstrap your development environment.</p>
	<pre class="terminal"><code data-language="shell">
$ pom setup
 * info fetch Wordpress 3.6
 * info plugin advanced-custom-fields at http://plugins.svn.wordpress.org/advanced-custom-fields/trunk
 * info plugins Successfully deployed.
 * info create database wordpress_development
 * info config creating wp-config.php
 * info htaccess creating .htaccess
 * info wpify success

$ pom staging deploy
 * info environment staging
 * info target ec2-54-227-42-2.compute-1.amazonaws.com
 * info deploy updating code
HEAD is now at ab476f8
 * info fetch Wordpress 3.6
 * info plugin advanced-custom-fields at http://plugins.svn.wordpress.org/advanced-custom-fields/trunk
 * info plugins Successfully deployed.
 * info config creating wp-config.php
 * info htaccess creating .htaccess
	</code></pre>
	<p>Every deploy will fetch a fresh copy of Wordpress, deploy your plugins, create a wp-config and htaccess file.</p>
</section>

<section class="annotate">
	<h2>New Settings</h2>
	<p>Use the wordpress setting to specify which version of Wordpress you need, and any other wordpress specific options.</p>
	<pre><code data-language="php">
$env-&gt;wordpress(array(
  'version'   =&gt; '3.6',
  'db_prefix' =&gt; 'wp_',
  'base_uri'  =&gt; ''
));

$env-&gt;plugins(array(
  // fetches from plugins.wordpress.org
  'advanced-custom-fields' =&gt; array('version' =&gt; 'latest'),

  // fetches from local folder
  'gravityforms' =&gt; array('dir' =&gt; 'lib/gravityforms')

  // fetches from git repository
  'wp-github-activity' =&gt; array('branch' =&gt; 'origin/master' =&gt; 'git' =&gt; 'https://github.com/alexkingorg/wp-github-activity'),

  // fetches from svn repository
  'more-types' =&gt; array('version' =&gt; '2.1', 'svn' =&gt; 'http://plugins.svn.wordpress.org/more-fields' )

));
	</code></pre>
	<p>You can optionally specify a <code>base_uri</code> to run wordpress in a sub directory or on a non standard port.</p>
	<p>The plugins setting allows you to specify any plugins that you would like Pomander to deploy.</p>
	<p>Plugins can be pulled down from multiple locations, check the example to the right to see them all.</p>
</section>

<section class="annotate">
	<h2>Project Structure</h2>
	<p>Pomander attempts to use a cleaner and safer structure to keep things sane.</p>
	<pre class="terminal"><code data-language="shell">
deploy/
public/
--- themes/
--- uploads/
vendor/
--- plugins/
wordpress/
wp-config.php
	</code></pre>
	<p><code>wp-config.php</code> is kept out of the wordpress folder for added security.</p>
	<p>Keep your wordpress themes in <code>public</code>.</p>
	<p>Plugins are automatically deployed to <code>vendor/plugins</code>.</p>
	<p>Wordpress core is kept completely isolated in its own folder. Make sure when you are setting up your web server virtual host, you point the document root to the wordpress folder.</p>
</section>
